<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Logging Performance</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Logging Performance</h1>
<h4 class="date">Updated as of 2024-10-12</h4>



<p>The following vignette presents benchmarks for <strong>log4r</strong>
against all general-purpose logging packages available on CRAN:</p>
<ul>
<li><a href="https://cran.r-project.org/package=futile.logger"><strong>futile.logger</strong></a>
and <a href="https://cran.r-project.org/package=logging"><strong>logging</strong></a>,
which are well-established packages; and</li>
<li><a href="https://cran.r-project.org/package=logger"><strong>logger</strong></a>,
<a href="https://cran.r-project.org/package=lgr"><strong>lgr</strong></a>,
<a href="https://cran.r-project.org/package=loggit"><strong>loggit</strong></a>,
and <a href="https://cran.r-project.org/package=rlog"><strong>rlog</strong></a>,
all of which are relative newcomers.</li>
</ul>
<p>Each logging package features slightly different capabilities, but
these benchmarks are focused on the two situations common to using all
of them:</p>
<ol style="list-style-type: decimal">
<li>Logging simple messages to the console; and</li>
<li>Deciding not to log a message because it is below the
threshold.</li>
</ol>
<p>The first of these is likely the most common kind of logging done by
end users, although some may chose to log to files, over HTTP, or to the
<a href="https://cran.r-project.org/package=rsyslog">system log</a>
(among others). Yet a benchmark of these other scenarios would largely
show the relative expense of these operations, instead of the overhead
of the logic performed by the logging packages themselves.</p>
<p>The second measures the performance impact of leaving logging
messages in running code, even if they are below the current threshold
of visibility. This is another measure of overhead for each logging
package.</p>
<div id="using-cat" class="section level2">
<h2>Using <code>cat()</code></h2>
<p>As a reference point, we can measure how long it takes R itself to
write a simple message to the console:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>cat_debug <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="fu">cat</span>() <span class="co"># Print nothing.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>}</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>cat_info <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">cat</span>(</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="st">&quot;INFO  [&quot;</span>, <span class="fu">format</span>(<span class="fu">Sys.time</span>(), <span class="st">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, <span class="at">usetz =</span> <span class="cn">FALSE</span>),</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  <span class="st">&quot;] Info message.&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="the-log4r-package" class="section level2">
<h2>The <strong>log4r</strong> Package</h2>
<p>The following is a typical <strong>log4r</strong> setup:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>log4r_logger <span class="ot">&lt;-</span> log4r<span class="sc">::</span><span class="fu">logger</span>(<span class="at">threshold =</span> <span class="st">&quot;INFO&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>log4r_info <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  log4r<span class="sc">::</span><span class="fu">info</span>(log4r_logger, <span class="st">&quot;Info message.&quot;</span>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>}</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>log4r_debug <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  log4r<span class="sc">::</span><span class="fu">debug</span>(log4r_logger, <span class="st">&quot;Debug message.&quot;</span>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="the-futile.logger-package" class="section level2">
<h2>The <strong>futile.logger</strong> Package</h2>
<p>The following is a typical <strong>futile.logger</strong> setup:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;futile.logger&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt; Loading required namespace: futile.logger</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>futile.logger<span class="sc">::</span><span class="fu">flog.logger</span>()</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>fl_info <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  futile.logger<span class="sc">::</span><span class="fu">flog.info</span>(<span class="st">&quot;Info message.&quot;</span>)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>}</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>fl_debug <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>  futile.logger<span class="sc">::</span><span class="fu">flog.debug</span>(<span class="st">&quot;Debug message.&quot;</span>)</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="the-logging-package" class="section level2">
<h2>The <strong>logging</strong> Package</h2>
<p>The following is what I believe to be a typical
<strong>logging</strong> setup:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;logging&quot;</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; Loading required namespace: logging</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>logging<span class="sc">::</span><span class="fu">basicConfig</span>()</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>logging_info <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  logging<span class="sc">::</span><span class="fu">loginfo</span>(<span class="st">&quot;Info message.&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>}</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>logging_debug <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>  logging<span class="sc">::</span><span class="fu">logdebug</span>(<span class="st">&quot;Debug message.&quot;</span>)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="the-logger-package" class="section level2">
<h2>The <strong>logger</strong> Package</h2>
<p>The following is what I believe to be a typical
<strong>logger</strong> setup:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;logger&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co">#&gt; Loading required namespace: logger</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co">#&gt; Registered S3 method overwritten by &#39;logger&#39;:</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">#&gt;   method         from </span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt;   print.loglevel log4r</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co"># Match the behaviour of other logging packages and write to the console.</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>logger<span class="sc">::</span><span class="fu">log_appender</span>(logger<span class="sc">::</span>appender_stdout)</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>logger_info <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>  logger<span class="sc">::</span><span class="fu">log_info</span>(<span class="st">&quot;Info message.&quot;</span>)</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>}</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>logger_debug <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  logger<span class="sc">::</span><span class="fu">log_debug</span>(<span class="st">&quot;Debug message.&quot;</span>)</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="the-lgr-package" class="section level2">
<h2>The <strong>lgr</strong> Package</h2>
<p>The following is what I believe to be a typical <strong>lgr</strong>
setup:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;lgr&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#&gt; Loading required namespace: lgr</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>lgr_logger <span class="ot">&lt;-</span> lgr<span class="sc">::</span><span class="fu">get_logger</span>(<span class="st">&quot;perf-test&quot;</span>)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>lgr_logger<span class="sc">$</span><span class="fu">set_appenders</span>(<span class="fu">list</span>(<span class="at">cons =</span> lgr<span class="sc">::</span>AppenderConsole<span class="sc">$</span><span class="fu">new</span>()))</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>lgr_logger<span class="sc">$</span><span class="fu">set_propagate</span>(<span class="cn">FALSE</span>)</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>lgr_info <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>  lgr_logger<span class="sc">$</span><span class="fu">info</span>(<span class="st">&quot;Info message.&quot;</span>)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>}</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>lgr_debug <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>  lgr_logger<span class="sc">$</span><span class="fu">debug</span>(<span class="st">&quot;Debug message.&quot;</span>)</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="the-loggit-package" class="section level2">
<h2>The <strong>loggit</strong> Package</h2>
<p>The following is what I believe to be a typical
<strong>loggit</strong> setup. Since we only want to log to the console,
set the output file to <code>/dev/null</code>. In addition,
<strong>loggit</strong> does not have a notion of thresholds, so there
is no “do nothing” operation to test.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;loggit&quot;</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt; Loading required namespace: loggit</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="cf">if</span> (.Platform<span class="sc">$</span>OS.type <span class="sc">==</span> <span class="st">&quot;unix&quot;</span>) {</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  loggit<span class="sc">::</span><span class="fu">set_logfile</span>(<span class="st">&quot;/dev/null&quot;</span>)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  loggit<span class="sc">::</span><span class="fu">set_logfile</span>(<span class="st">&quot;nul&quot;</span>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>}</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>loggit_info <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>  loggit<span class="sc">::</span><span class="fu">loggit</span>(<span class="st">&quot;INFO&quot;</span>, <span class="st">&quot;Info message.&quot;</span>)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="the-rlog-package" class="section level2">
<h2>The <strong>rlog</strong> Package</h2>
<p>The <strong>rlog</strong> package currently has no configuration
options other than the threshold, which is controlled via an environment
variable and defaults to hiding debug-level messages:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;rlog&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#&gt; Loading required namespace: rlog</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>rlog_info <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  rlog<span class="sc">::</span><span class="fu">log_info</span>(<span class="st">&quot;Info message.&quot;</span>)</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>}</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>rlog_debug <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>  rlog<span class="sc">::</span><span class="fu">log_debug</span>(<span class="st">&quot;Debug message.&quot;</span>)</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="test-all-loggers" class="section level2">
<h2>Test All Loggers</h2>
<p>Debug messages should print nothing.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">log4r_debug</span>()</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">cat_debug</span>()</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">logging_debug</span>()</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="fu">fl_debug</span>()</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="fu">logger_debug</span>()</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="fu">lgr_debug</span>()</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="fu">rlog_debug</span>()</span></code></pre></div>
<p>Info messages should print to the console. Small differences in
output format are to be expected.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">log4r_info</span>()</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; INFO  [2024-10-12 00:35:22] Info message.</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">cat_info</span>()</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt; INFO  [2024-10-12 00:35:22] Info message.</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="fu">logging_info</span>()</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt; 2024-10-12 00:35:22.582721 INFO::Info message.</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="fu">fl_info</span>()</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt; INFO [2024-10-12 00:35:22] Info message.</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="fu">logger_info</span>()</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; INFO [2024-10-12 00:35:22] Info message.</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="fu">lgr_info</span>()</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt; INFO  [00:35:22.588] Info message.</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="fu">loggit_info</span>()</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="co">#&gt; {&quot;timestamp&quot;: &quot;2024-10-12T00:35:22-0400&quot;, &quot;log_lvl&quot;: &quot;INFO&quot;, &quot;log_msg&quot;: &quot;Info message.&quot;}</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="fu">rlog_info</span>()</span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="co">#&gt; 2024-10-12 00:35:22.590646 [INFO] Info message.</span></span></code></pre></div>
</div>
<div id="benchmarks" class="section level2">
<h2>Benchmarks</h2>
<p>The following benchmarks all loggers defined above:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>info_bench <span class="ot">&lt;-</span> microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="at">cat =</span> <span class="fu">cat_info</span>(),</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="at">log4r =</span> <span class="fu">log4r_info</span>(),</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="at">futile.logger =</span> <span class="fu">fl_info</span>(),</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  <span class="at">logging =</span> <span class="fu">logging_info</span>(),</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="at">logger =</span> <span class="fu">logger_info</span>(),</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>  <span class="at">lgr =</span> <span class="fu">lgr_info</span>(),</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  <span class="at">loggit =</span> <span class="fu">loggit_info</span>(),</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>  <span class="at">rlog =</span> <span class="fu">rlog_info</span>(),</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  <span class="at">times =</span> <span class="dv">500</span>,</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">list</span>(<span class="at">warmups =</span> <span class="dv">50</span>)</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>debug_bench <span class="ot">&lt;-</span> microbenchmark<span class="sc">::</span><span class="fu">microbenchmark</span>(</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>  <span class="at">cat =</span> <span class="fu">cat_debug</span>(),</span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>  <span class="at">log4r =</span> <span class="fu">log4r_debug</span>(),</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a>  <span class="at">futile.logger =</span> <span class="fu">fl_debug</span>(),</span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a>  <span class="at">logging =</span> <span class="fu">logging_debug</span>(),</span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a>  <span class="at">logger =</span> <span class="fu">logger_debug</span>(),</span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>  <span class="at">lgr =</span> <span class="fu">lgr_debug</span>(),</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a>  <span class="at">rlog =</span> <span class="fu">rlog_debug</span>(),</span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>  <span class="at">times =</span> <span class="dv">500</span>,</span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">list</span>(<span class="at">warmups =</span> <span class="dv">50</span>)</span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a>)</span></code></pre></div>
<div id="how-long-does-it-take-to-print-messages" class="section level3">
<h3>How long does it take to print messages?</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">print</span>(info_bench, <span class="at">order =</span> <span class="st">&quot;median&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt; Unit: microseconds</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">#&gt;           expr      min        lq       mean    median        uq       max</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt;          log4r   24.606   32.9470   36.46860   34.4645   36.5990   790.553</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#&gt;            cat   42.360   49.0670   54.74075   52.3280   55.2140  1174.072</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt;           rlog   72.807   86.8880   91.64763   89.7235   93.0645   760.426</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt;         logger  187.802  208.6260  227.08602  213.5105  221.2045  2559.952</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt;        logging  250.289  271.4195  297.23647  277.9565  285.8615  6043.315</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt;            lgr  410.149  433.6680  514.84438  442.4900  455.7845 27092.424</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt;         loggit  551.164  582.5325  614.46588  592.3410  606.4575  3004.305</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt;  futile.logger 1781.251 1837.2360 1975.10361 1859.8330 1887.3850  6475.376</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt;  neval</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt;    500</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt;    500</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co">#&gt;    500</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt;    500</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt;    500</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt;    500</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt;    500</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="co">#&gt;    500</span></span></code></pre></div>
</div>
<div id="how-long-does-it-take-to-decide-to-do-nothing" class="section level3">
<h3>How long does it take to decide to do nothing?</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">print</span>(debug_bench, <span class="at">order =</span> <span class="st">&quot;median&quot;</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co">#&gt; Unit: microseconds</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co">#&gt;           expr     min       lq       mean  median       uq      max neval</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co">#&gt;            cat   2.124   2.8000   4.561908   3.467   3.6870  628.318   500</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#&gt;          log4r   2.775   3.2810   5.496310   3.977   4.8240  727.564   500</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt;           rlog   6.913   7.9650  10.732968   9.954  10.6800  648.016   500</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt;            lgr  13.566  15.3140  19.107736  18.404  19.3415  826.921   500</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#&gt;        logging  16.812  19.1210  24.741822  22.938  26.2090  919.996   500</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co">#&gt;         logger  16.641  18.7955  28.088108  23.219  24.2955 2302.388   500</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co">#&gt;  futile.logger 544.782 560.7920 592.952722 567.505 574.5425 4851.369   500</span></span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
